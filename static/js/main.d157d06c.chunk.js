(this.webpackJsonpcafeteria=this.webpackJsonpcafeteria||[]).push([[0],{176:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setCategory",(function(){return y})),a.d(n,"setDate",(function(){return j})),a.d(n,"setDayOfWeek",(function(){return k})),a.d(n,"setDayOfMonth",(function(){return D})),a.d(n,"setCallingStatus",(function(){return _})),a.d(n,"getWeekMeal",(function(){return x})),a.d(n,"setVote",(function(){return N})),a.d(n,"getVote",(function(){return C})),a.d(n,"postVote",(function(){return A})),a.d(n,"postComment",(function(){return w})),a.d(n,"deleteComment",(function(){return T})),a.d(n,"getComment",(function(){return I})),a.d(n,"getGoogleID",(function(){return F}));var r=a(0),o=a.n(r),c=a(24),l=a.n(c),s=(a(85),a(6)),u=a(7),i=a(9),m=a(8),d=a(13),p=a(12),f=a(14),h=a.n(f),b=a(23),E=a(21),v=a.n(E),O="https://cors-anywhere.herokuapp.com/https://avonoldfarms.flikisdining.com/menu/api/weeks/school/avon-old-farms/menu-type/",g="http://localhost:6969/",y=function(e){return function(t){t({type:"SET_CATEGORY",payload:e})}},j=function(e){return function(t){t({type:"SET_DATE",payload:e})}},k=function(e){return function(t){t({type:"SET_DAY_OF_WEEK",payload:e})}},D=function(e){return function(t){t({type:"SET_DAY_OF_MONTH",payload:e})}},_=function(e){return function(t){t({type:"SET_API_CALLING_STATUS",payload:e})}},x=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(a){var n,r,o,c,l,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Calling API..."),_(!0),n=new Date(e),r=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate(),t.prev=4,t.next=7,v.a.get(O+"breakfast/".concat(r));case 7:return o=t.sent,t.next=10,v.a.get(O+"lunch/".concat(r));case 10:return c=t.sent,t.next=13,v.a.get(O+"dinner/".concat(r));case 13:l=t.sent,s={isLoaded:!0,breakfast:o,lunch:c,dinner:l},console.log("API Request finished, date:".concat(n)),console.log(s),a({type:"GET_WEEK_MEAL",payload:s}),t.next=25;break;case 20:return t.prev=20,t.t0=t.catch(4),console.log(t.t0),alert("An error occurred while parsing data."),t.abrupt("return",null);case 25:_(!1);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(t){t({type:"SET_VOTE_INFO",payload:e})}},C=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Get Vote Info..."),t.prev=1,t.next=4,v.a.get(g+"vote/",{params:e});case 4:n=t.sent,console.log(n),a({type:"GET_VOTE_INFO",payload:{isLoaded:!0,info:n}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Post Vote Data to API Server..."),console.log(e),t.next=4,v.a.post(g+"vote/",e);case 4:a=t.sent,console.log(a);case 6:case"end":return t.stop()}}),t)})))},w=function(e){return Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Post Comment Data to API Server..."),console.log(e),t.next=4,v.a.post(g+"comment/",e);case 4:a=t.sent,console.log(a);case 6:case"end":return t.stop()}}),t)})))},T=function(e){return Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Request delete comment from the database..."),console.log(e),t.next=4,v.a.post(g+"delete_comment/",e);case 4:a=t.sent,console.log(a);case 6:case"end":return t.stop()}}),t)})))},I=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Request comment data from the database..."),console.log(e),t.prev=2,t.next=5,v.a.get(g+"comment/",{params:e});case 5:n=t.sent,console.log(n),a({type:"GET_COMMENT_DATA",payload:{isLoaded:!0,data:n}}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=e?e.profileObj.email.endsWith("@avonoldfarms.com")?a({type:"GET_GOOGLE_INFO",payload:{isAOF:!0,data:e}}):alert("You are not an Avon student. To prevent duplicate vote, please login with your Avon Old Farms School's google account."):alert("Google Login Error");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.category;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"category"},o.a.createElement("div",{className:"categoryitem ".concat(0===t?"enable":"disable"),onClick:function(){e.props.setCategory(0)}},"Meal"),o.a.createElement("div",{className:"categoryitem ".concat(3===t?"enable":"disable"),onClick:function(){e.props.setCategory(3)}},"Information")))}}]),a}(o.a.Component),W=Object(p.c)(Object(d.b)((function(e){return{category:e.status.category}}),n))(S),L=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.day;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"day ".concat(t===this.props.index?"color".concat(this.props.index+1):"disable"),onClick:function(){e.props.setDayOfWeek(e.props.index)}},this.props.text))}}]),a}(o.a.Component),G=Object(p.c)(Object(d.b)((function(e){return{day:e.status.dayOfWeek}}),n))(L),P=a(73),M=a.n(P),V=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",{className:"loading"},o.a.createElement(M.a,{type:"bars",width:"100%",height:"auto"})),o.a.createElement("h4",{className:"center"},"Using Chrome?",o.a.createElement("br",null),"YOUR RAM IS MINE!")))}}]),a}(o.a.Component),Y=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.data,t=[];if(e.length>0)for(var a=0;a<e.length;a++){var n;if(null!=e[a].food)n=null==e[a].food.image_url?"https://source.unsplash.com/300x300/?".concat(e[a].food.name):e[a].food.image_url,t.push(o.a.createElement("div",{key:a,className:"item"},o.a.createElement("a",{target:"_blank"},o.a.createElement("img",{src:n,alt:e[a].food.name,className:"img"})),o.a.createElement("p",{className:"name"},e[a].food.name),o.a.createElement("p",{className:"description"},e[a].food.description)))}else t=o.a.createElement("div",{className:"item"},o.a.createElement("h3",{className:"center"},"There is currently nothing on the menu today."));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"itemcontainer ".concat(this.props.color)},o.a.createElement("div",{className:"title"},this.props.title),o.a.createElement("div",null,t)))}}]),a}(o.a.Component),H=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.mealWeek;if(!this.props.status.callingAPI&&e.isLoaded){var t=e.breakfast.data.days[this.props.dayOfWeek],a=e.lunch.data.days[this.props.dayOfWeek],n=e.dinner.data.days[this.props.dayOfWeek];return o.a.createElement("div",{className:"center"},o.a.createElement("div",{className:"meal"},o.a.createElement(Y,{data:t.menu_items,title:"Breakfast",color:"color1"}),o.a.createElement(Y,{data:a.menu_items,title:"Lunch",color:"color2"}),o.a.createElement(Y,{data:n.menu_items,title:"Dinner",color:"color3"})),o.a.createElement("h4",{className:"center"},"*Since we are using a random keyword image search API, some of the images might not display properly."))}return o.a.createElement(V,null)}}]),a}(o.a.Component),R=Object(p.c)(Object(d.b)((function(e){return{status:e.status,dayOfWeek:e.status.dayOfWeek,mealWeek:e.mealWeek}}),n))(H),q=a(74),K=a.n(q),U=(a(107),function(e){var t=e.value,a=e.onClick;return o.a.createElement("div",{className:"datepicker color6",onClick:a},"Select Period ",o.a.createElement("br",null),t)}),B=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){null!=t&&(e.props.setDate(t),e.props.setDayOfWeek(t.getDay()),e.props.status.callingAPI||e.props.getWeekMeal(t))},e}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"datebox"},o.a.createElement(K.a,{selected:this.props.status.date,onChange:this.handleChange,customInput:o.a.createElement(U,null)})),o.a.createElement("div",{className:"weeklybox"},o.a.createElement(G,{text:"Sun",index:0}),o.a.createElement(G,{text:"Mon",index:1}),o.a.createElement(G,{text:"Tue",index:2}),o.a.createElement(G,{text:"Wed",index:3}),o.a.createElement(G,{text:"Thu",index:4}),o.a.createElement(G,{text:"Fri",index:5}),o.a.createElement(G,{text:"Sat",index:6})),o.a.createElement(R,null))}}]),a}(o.a.Component),J=Object(p.c)(Object(d.b)((function(e){return{status:e.status}}),n))(B),z=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e,t=this.props.data;switch(t.time.meal){case 0:e="Breakfast";break;case 1:e="Lunch";break;case 2:e="Dinner";break;default:e=t.time.meal}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"voteinfo color5"},o.a.createElement("h3",null,"Date: ",new Date(t.time.date).toDateString(),o.a.createElement("br",null),"Meal: ",e,o.a.createElement("br",null),"Rate: ",Math.round(t.vote/t.total),o.a.createElement("br",null),"Total Votes: ",t.total)))}}]),a}(o.a.Component),Q=a(77),X=a(78),Z=a.n(X);Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),new Date(t)};var $=2.5,ee=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"req",value:function(){return{date1:(new Date).toDateString(),date2:(new Date).addDays(1).toDateString()}}},{key:"sendVote",value:function(e){var t,a=new Date;return t=a.getHours()<11?0:a.getHours()<17?1:2,{time:a.toDateString(),meal:t,email:this.props.gData.data.profileObj.email,vote:e}}},{key:"ratingChanged",value:function(e){$=e,console.log($)}},{key:"render",value:function(){var e,t,a=this;if(this.props.status.voteInfo.isLoaded){e=[];for(var n=this.props.status.voteInfo.info.data,r=0;r<n.length;r++)console.log(n[r]),e.push(o.a.createElement(z,{data:n[r],key:r}))}else e=o.a.createElement(V,null),this.props.getVote(this.req());t=this.props.gData.isAOF?o.a.createElement("h2",null,"Hi, ",this.props.gData.data.profileObj.name,"! How was food at Avon today?"):o.a.createElement("h3",null,"It seems like you are not logged in with AOF Google account.",o.a.createElement("br",null),"Please login with the AOF account to vote for your meal today.");var c=o.a.createElement(Q.GoogleLogin,{clientId:"340618285609-r6colaj22eh4tn822j4723t8bolhsobb.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.props.getGoogleID,onFailure:this.props.getGoogleID,cookiePolicy:"single_host_origin"}),l=o.a.createElement(o.a.Fragment,null,o.a.createElement(Z.a,{value:2.5,count:5,onChange:this.ratingChanged,size:50,isHalf:!0,emptyIcon:o.a.createElement("i",{className:"far fa-star color1"}),halfIcon:o.a.createElement("i",{className:"fa fa-star-half-alt color1"}),fullIcon:o.a.createElement("i",{className:"fa fa-star color1"}),activeColor:"#fff"}),o.a.createElement("div",{className:"categoryitem enable",onClick:function(){a.props.postVote(a.sendVote($))}},"Submit"));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"textbox"},o.a.createElement("h1",null,"How was the meal today?"),t,this.props.gData.isAOF?l:c,o.a.createElement("h1",null,o.a.createElement("br",null),"Today's vote result \ud83d\uddf3\ufe0f",o.a.createElement("div",null,e))))}}]),a}(o.a.Component),te=Object(p.c)(Object(d.b)((function(e){return{status:e.status,mealWeek:e.mealWeek,gData:e.googleData}}),n))(ee),ae=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"textbox"},o.a.createElement("div",{className:"subtitle"},"Information"),o.a.createElement("br",null),o.a.createElement("div",{className:"textarea"},o.a.createElement("div",null,o.a.createElement("h1",null," \u25cf About Avon Food"),o.a.createElement("h2",null,"Avon Food provides more than just meal information."),o.a.createElement("h3",null,"With Avon Food, you can share your thoughts. You can vote for the quality of the meals, you can share your thoughts with other students, and you can give feedback to school faculties.")),o.a.createElement("br",null),o.a.createElement("div",null,o.a.createElement("h1",null," \u25cf Privacy"),o.a.createElement("h2",null,"Privacy Policy for TeamAvo"),o.a.createElement("h3",null,"One of our main priorities is the privacy of our visitors. You can read more about how we handle the user inforamtion at"," ",o.a.createElement("a",{href:"https://teamavo.github.io/PrivacyPolicy.html",target:"_top"},"here."))),o.a.createElement("br",null),o.a.createElement("div",null,o.a.createElement("h1",null," \u25cf Support"),o.a.createElement("h2",null,"Need help?"),o.a.createElement("h3",null,"Ask help to our Team Avo members or join our discord server!"),o.a.createElement("h3",null,o.a.createElement("ul",null,o.a.createElement("li",null,"HyunJun Park:",o.a.createElement("a",{href:"mailto:parkh@avonoldfarms.com",target:"_top"},"parkh@avonoldfarms.com")),o.a.createElement("li",null,"Spencer Li:",o.a.createElement("a",{href:"mailto:lis@avonoldfarms.com",target:"_top"},"parkh@avonoldfarms.com")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://discord.gg/RkdFjM"},"Discord"))))),o.a.createElement("h5",null,"Last update at 9/1/2020"))))}}]),a}(o.a.Component),ne=Object(p.c)(Object(d.b)((function(e){return{status:e.status,mealWeek:e.mealWeek}}),n))(ae),re=(a(170),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"commentbox"},o.a.createElement("div",{className:"userinfo color8"},this.props.data.name," (",this.props.data.email,")"),o.a.createElement("div",{className:"text"},o.a.createElement("h5",null,this.props.data.like,o.a.createElement("br",null),this.props.data.meal_type,", ",this.props.data.menu),o.a.createElement("h4",null,this.props.data.comment)),o.a.createElement("div",{className:"statusbox"},o.a.createElement("div",{className:"timebox color5"}," ",this.props.data.date," "),o.a.createElement("div",{className:"sectionbox color6"}))))}}]),a}(o.a.Component)),oe=a(173),ce=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"sendComment",value:function(){var e=new Date,t=oe("1234");return{date:e.toDateString(),name:"admin",email:"test2@test.com",pw:t,meal_type:"Lunch",menu:"apple",like:!0,comment:"Hi there! this is a test!"}}},{key:"deleteComment",value:function(){return{_id:"",pw:oe("1234")}}},{key:"render",value:function(){var e,t=this;if(this.props.status.commentData.isLoaded){e=[];for(var a=this.props.status.commentData.data.data,n=0;n<a.length;n++)console.log(a[n]),e.push(o.a.createElement(re,{data:a[n],key:n}))}else e=o.a.createElement(V,null),this.props.getComment({date:new Date});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"textbox"},o.a.createElement("h1",null,"Comment"),o.a.createElement("h2",null,"This section is under development."),e,o.a.createElement("div",{className:"categoryitem enable",onClick:function(){t.props.postComment(t.sendComment())}},"Submit"),o.a.createElement("div",{className:"categoryitem enable",onClick:function(){t.props.deleteComment(t.deleteComment())}},"Delete")))}}]),a}(o.a.Component),le=Object(p.c)(Object(d.b)((function(e){return{status:e.status,mealWeek:e.mealWeek}}),n))(ce),se=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.status.category;return this.props.status.callingAPI||this.props.mealWeek.isLoaded||this.props.getWeekMeal(new Date),o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,o.a.createElement("div",{className:"title"},"Avon Food")),o.a.createElement(W,null),o.a.createElement("div",null,0===e?o.a.createElement(J,null):"",1===e?o.a.createElement(te,null):"",2===e?o.a.createElement(le,null):"",3===e?o.a.createElement(ne,null):""))}}]),a}(o.a.Component),ue=Object(p.c)(Object(d.b)((function(e){return{status:e.status,mealWeek:e.mealWeek}}),n))(se),ie=a(79),me=a(4),de=new Date,pe={status:{category:0,date:de,dayOfWeek:de.getDay(),callingAPI:!1,voteInfo:{isLoaded:!1,info:null},commentData:{isLoaded:!1,data:null}},mealWeek:{isLoaded:!1,breakfast:"",lunch:"",dinner:""},googleData:{isAOF:!1,data:null}};l.a.render(o.a.createElement(d.a,{store:Object(p.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORY":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{category:t.payload})});case"SET_DATE":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{date:t.payload})});case"SET_DAY_OF_WEEK":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{dayOfWeek:t.payload})});case"SET_DAY_OF_MONTH":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{dayOfMonth:t.payload})});case"SET_API_CALLING_STATUS":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{callingAPI:t.payload})});case"GET_WEEK_MEAL":return Object(me.a)(Object(me.a)({},e),{},{mealWeek:t.payload});case"GET_GOOGLE_INFO":return Object(me.a)(Object(me.a)({},e),{},{googleData:t.payload});case"SET_VOTE_INFO":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{voteInfo:Object(me.a)(Object(me.a)({},e.status.voteInfo),{},{isLoaded:t.payload})})});case"GET_VOTE_INFO":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{voteInfo:t.payload})});case"GET_COMMENT_DATA":return Object(me.a)(Object(me.a)({},e),{},{status:Object(me.a)(Object(me.a)({},e.status),{},{commentData:t.payload})});default:return e}}),Object(p.a)(ie.a))},o.a.createElement(ue,null)),document.getElementById("root"))},80:function(e,t,a){e.exports=a(176)},85:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.d157d06c.chunk.js.map