(this.webpackJsonpcafeteria=this.webpackJsonpcafeteria||[]).push([[0],{168:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setCategory",(function(){return v})),a.d(n,"setDate",(function(){return j})),a.d(n,"setDayOfWeek",(function(){return k})),a.d(n,"setDayOfMonth",(function(){return D})),a.d(n,"setCallingStatus",(function(){return _})),a.d(n,"getWeekMeal",(function(){return I})),a.d(n,"setVote",(function(){return N})),a.d(n,"getVote",(function(){return T})),a.d(n,"postVote",(function(){return A})),a.d(n,"getGoogleID",(function(){return x}));var r=a(0),o=a.n(r),c=a(20),l=a.n(c),s=(a(82),a(7)),u=a(8),i=a(10),m=a(9),p=a(12),d=a(11),f=a(19),b=a.n(f),h=a(32),O=a(26),g=a.n(O),E="https://cors-anywhere.herokuapp.com/https://avonoldfarms.flikisdining.com/menu/api/weeks/school/avon-old-farms/menu-type/",y="https://cryptic-reaches-78660.herokuapp.com/",v=function(e){return function(t){t({type:"SET_CATEGORY",payload:e})}},j=function(e){return function(t){t({type:"SET_DATE",payload:e})}},k=function(e){return function(t){t({type:"SET_DAY_OF_WEEK",payload:e})}},D=function(e){return function(t){t({type:"SET_DAY_OF_MONTH",payload:e})}},_=function(e){return function(t){t({type:"SET_API_CALLING_STATUS",payload:e})}},I=function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){var n,r,o,c,l,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Calling API..."),_(!0),n=new Date(e),r=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate(),t.prev=4,t.next=7,g.a.get(E+"breakfast/".concat(r));case 7:return o=t.sent,t.next=10,g.a.get(E+"lunch/".concat(r));case 10:return c=t.sent,t.next=13,g.a.get(E+"dinner/".concat(r));case 13:l=t.sent,s={isLoaded:!0,breakfast:o,lunch:c,dinner:l},console.log("API Request finished, date:".concat(n)),console.log(s),a({type:"GET_WEEK_MEAL",payload:s}),t.next=25;break;case 20:return t.prev=20,t.t0=t.catch(4),console.log(t.t0),alert("An error occurred while parsing data."),t.abrupt("return",null);case 25:_(!1);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(t){t({type:"SET_VOTE_INFO",payload:e})}},T=function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Get Vote Info..."),t.prev=1,t.next=4,g.a.get(y,{params:e});case 4:n=t.sent,console.log(n),a({type:"GET_VOTE_INFO",payload:{isLoaded:!0,info:n}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return Object(h.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Post Vote Data to API Server..."),console.log(e),t.next=4,g.a.post(y,e);case 4:a=t.sent,console.log(a);case 6:case"end":return t.stop()}}),t)})))},x=function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null!=e?e.profileObj.email.endsWith("@avonoldfarms.com")?a({type:"GET_GOOGLE_INFO",payload:{isAOF:!0,data:e}}):alert("You are not an Avon student. To prevent duplicate vote, please login with your Avon Old Farms School's google account."):alert("Google Login Error");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.category;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"category"},o.a.createElement("div",{className:"categoryitem ".concat(0===t?"enable":"disable"),onClick:function(){e.props.setCategory(0)}},"Meal"),o.a.createElement("div",{className:"categoryitem ".concat(1===t?"enable":"disable"),onClick:function(){e.props.setCategory(1)}},"Vote"),o.a.createElement("div",{className:"categoryitem ".concat(2===t?"enable":"disable"),onClick:function(){e.props.setCategory(2)}},"Information")))}}]),a}(o.a.Component),C=Object(d.c)(Object(p.b)((function(e){return{category:e.status.category}}),n))(w),W=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.day;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"day ".concat(t===this.props.index?"color".concat(this.props.index+1):"disable"),onClick:function(){e.props.setDayOfWeek(e.props.index)}},this.props.text))}}]),a}(o.a.Component),F=Object(d.c)(Object(p.b)((function(e){return{day:e.status.dayOfWeek}}),n))(W),S=a(70),G=a.n(S),L=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",{className:"loading"},o.a.createElement(G.a,{type:"bars",width:"100%",height:"auto"})),o.a.createElement("h4",{className:"center"},"Using Chrome?",o.a.createElement("br",null),"YOUR RAM IS MINE!")))}}]),a}(o.a.Component),M=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.data,t=[];if(e.length>0)for(var a=0;a<e.length;a++){var n;if(null!=e[a].food)n=null==e[a].food.image_url?"https://source.unsplash.com/300x300/?".concat(e[a].food.name):e[a].food.image_url,t.push(o.a.createElement("div",{key:a,className:"item"},o.a.createElement("a",{target:"_blank",href:n},o.a.createElement("img",{src:n,alt:e[a].food.name,className:"img"})),o.a.createElement("p",{className:"name"},e[a].food.name),o.a.createElement("p",{className:"description"},e[a].food.description)))}else t=o.a.createElement("div",{className:"item"},o.a.createElement("h3",{className:"center"},"There is currently nothing on the menu today."));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"itemcontainer ".concat(this.props.color)},o.a.createElement("div",{className:"title"},this.props.title),o.a.createElement("div",null,t)))}}]),a}(o.a.Component),P=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.mealWeek;if(!this.props.status.callingAPI&&e.isLoaded){var t=e.breakfast.data.days[this.props.dayOfWeek],a=e.lunch.data.days[this.props.dayOfWeek],n=e.dinner.data.days[this.props.dayOfWeek];return o.a.createElement("div",{className:"center"},o.a.createElement("div",{className:"meal"},o.a.createElement(M,{data:t.menu_items,title:"Breakfast",color:"color1"}),o.a.createElement(M,{data:a.menu_items,title:"Lunch",color:"color2"}),o.a.createElement(M,{data:n.menu_items,title:"Dinner",color:"color3"})),o.a.createElement("h4",{className:"center"},"*Since we are using a random keyword image search API, some of the images might not display properly."))}return o.a.createElement(L,null)}}]),a}(o.a.Component),V=Object(d.c)(Object(p.b)((function(e){return{status:e.status,dayOfWeek:e.status.dayOfWeek,mealWeek:e.mealWeek}}),n))(P),H=a(71),Y=a.n(H),R=(a(105),function(e){var t=e.value,a=e.onClick;return o.a.createElement("div",{className:"datepicker color6",onClick:a},"Select Period ",o.a.createElement("br",null),t)}),K=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){null!=t&&(e.props.setDate(t),e.props.setDayOfWeek(t.getDay()),e.props.status.callingAPI||e.props.getWeekMeal(t))},e}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"datebox"},o.a.createElement(Y.a,{selected:this.props.status.date,onChange:this.handleChange,customInput:o.a.createElement(R,null)})),o.a.createElement("div",{className:"weeklybox"},o.a.createElement(F,{text:"Sun",index:0}),o.a.createElement(F,{text:"Mon",index:1}),o.a.createElement(F,{text:"Tue",index:2}),o.a.createElement(F,{text:"Wed",index:3}),o.a.createElement(F,{text:"Thu",index:4}),o.a.createElement(F,{text:"Fri",index:5}),o.a.createElement(F,{text:"Sat",index:6})),o.a.createElement(V,null))}}]),a}(o.a.Component),U=Object(d.c)(Object(p.b)((function(e){return{status:e.status}}),n))(K),q=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e,t=this.props.data;switch(t.time.meal){case 0:e="Breakfast";break;case 1:e="Lunch";break;case 2:e="Dinner";break;default:e=t.time.meal}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"voteinfo color5"},o.a.createElement("h3",null,"Date: ",new Date(t.time.date).toDateString(),o.a.createElement("br",null),"Meal: ",e,o.a.createElement("br",null),"Rate: ",Math.round(t.vote/t.total),o.a.createElement("br",null),"Total Votes: ",t.total)))}}]),a}(o.a.Component),B=a(74),J=a(75),z=a.n(J);Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),new Date(t)};var Q=2.5,X=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"req",value:function(){return{date1:(new Date).toDateString(),date2:(new Date).addDays(1).toDateString()}}},{key:"sendVote",value:function(e){var t,a=new Date;return t=a.getHours()<5?2:a.getHours()<11?0:a.getHours()<16?1:2,{time:a.toDateString(),meal:t,email:this.props.gData.data.profileObj.email,vote:e}}},{key:"ratingChanged",value:function(e){Q=e,console.log(Q)}},{key:"render",value:function(){var e,t,a=this;if(this.props.status.voteInfo.isLoaded){e=[];for(var n=this.props.status.voteInfo.info.data,r=0;r<n.length;r++)console.log(n[r]),e.push(o.a.createElement(q,{data:n[r],key:r}))}else e=o.a.createElement(L,null),this.props.getVote(this.req());t=this.props.gData.isAOF?o.a.createElement("h2",null,"Hi, ",this.props.gData.data.profileObj.name,"! How was food at Avon today?"):o.a.createElement("h3",null,"It seems like you are not logged in with AOF Google account.",o.a.createElement("br",null),"Please login with the AOF account to vote for your meal today.");var c=o.a.createElement(B.GoogleLogin,{clientId:"340618285609-r6colaj22eh4tn822j4723t8bolhsobb.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.props.getGoogleID,onFailure:this.props.getGoogleID,cookiePolicy:"single_host_origin"}),l=o.a.createElement(o.a.Fragment,null,o.a.createElement(z.a,{value:2.5,count:5,onChange:this.ratingChanged,size:50,isHalf:!0,emptyIcon:o.a.createElement("i",{className:"far fa-star color1"}),halfIcon:o.a.createElement("i",{className:"fa fa-star-half-alt color1"}),fullIcon:o.a.createElement("i",{className:"fa fa-star color1"}),activeColor:"#fff"}),o.a.createElement("div",{className:"categoryitem enable",onClick:function(){a.props.postVote(a.sendVote(Q))}},"Submit"),"test");return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"textbox"},o.a.createElement("h1",null,"How was the meal today?"),t,this.props.gData.isAOF?l:c,o.a.createElement("h1",null,o.a.createElement("br",null),"Today's vote result \ud83d\uddf3\ufe0f",o.a.createElement("div",null,e))))}}]),a}(o.a.Component),Z=Object(d.c)(Object(p.b)((function(e){return{status:e.status,mealWeek:e.mealWeek,gData:e.googleData}}),n))(X),$=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Info"))}}]),a}(o.a.Component),ee=Object(d.c)(Object(p.b)((function(e){return{status:e.status,mealWeek:e.mealWeek}}),n))($),te=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.status.category;return this.props.status.callingAPI||this.props.mealWeek.isLoaded||this.props.getWeekMeal("2020/03/01"),o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,o.a.createElement("div",{className:"title"},"Avo Food")),o.a.createElement(C,null),o.a.createElement("div",null,0===e?o.a.createElement(U,null):"",1===e?o.a.createElement(Z,null):"",2===e?o.a.createElement(ee,null):""))}}]),a}(o.a.Component),ae=Object(d.c)(Object(p.b)((function(e){return{status:e.status,mealWeek:e.mealWeek}}),n))(te),ne=a(76),re=a(4),oe=new Date,ce={status:{category:0,date:oe,dayOfWeek:oe.getDay(),callingAPI:!1,voteInfo:{isLoaded:!1,info:null}},mealWeek:{isLoaded:!1,breakfast:"",lunch:"",dinner:""},googleData:{isAOF:!1,data:null}};l.a.render(o.a.createElement(p.a,{store:Object(d.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORY":return Object(re.a)(Object(re.a)({},e),{},{status:Object(re.a)(Object(re.a)({},e.status),{},{category:t.payload})});case"SET_DATE":return Object(re.a)(Object(re.a)({},e),{},{status:Object(re.a)(Object(re.a)({},e.status),{},{date:t.payload})});case"SET_DAY_OF_WEEK":return Object(re.a)(Object(re.a)({},e),{},{status:Object(re.a)(Object(re.a)({},e.status),{},{dayOfWeek:t.payload})});case"SET_DAY_OF_MONTH":return Object(re.a)(Object(re.a)({},e),{},{status:Object(re.a)(Object(re.a)({},e.status),{},{dayOfMonth:t.payload})});case"SET_API_CALLING_STATUS":return Object(re.a)(Object(re.a)({},e),{},{status:Object(re.a)(Object(re.a)({},e.status),{},{callingAPI:t.payload})});case"GET_WEEK_MEAL":return Object(re.a)(Object(re.a)({},e),{},{mealWeek:t.payload});case"GET_GOOGLE_INFO":return Object(re.a)(Object(re.a)({},e),{},{googleData:t.payload});case"SET_VOTE_INFO":return Object(re.a)(Object(re.a)({},e),{},{status:Object(re.a)(Object(re.a)({},e.status),{},{voteInfo:Object(re.a)(Object(re.a)({},e.status.voteInfo),{},{isLoaded:t.payload})})});case"GET_VOTE_INFO":return Object(re.a)(Object(re.a)({},e),{},{status:Object(re.a)(Object(re.a)({},e.status),{},{voteInfo:t.payload})});default:return e}}),Object(d.a)(ne.a))},o.a.createElement(ae,null)),document.getElementById("root"))},77:function(e,t,a){e.exports=a(168)},82:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.efe864bf.chunk.js.map